import DivContents from"./DivContents2.js";export default class narniaAdjustShiftCounts{#e;#t;#n;constructor(){this.#e="",this.#t="",this.#n=[],this.main()}main(){let e=null,t=null;document.getElementById("modalDiv").style.display="block",document.getElementById("modalTitle").insertAdjacentHTML("beforeend","<h3>Enter Shift Date to Recreate</h3>"),document.getElementById("dataEntryDiv").insertAdjacentHTML("beforeend",DivContents.getNarniaShiftRecreateDiv()),document.getElementById("modalSubmitButton").disabled=!0,document.getElementById("fixButton").classList.add("disabled"),document.getElementById("nspLogo").classList.add("disabled"),document.getElementById("narniaShiftDate").focus(),document.getElementById("modalCancelButton").addEventListener("click",(()=>{document.getElementById("fixButton").classList.remove("disabled"),document.getElementById("nspLogo").classList.remove("disabled"),document.getElementById("modalTitle").innerHTML="",document.getElementById("dataEntryDiv").innerHTML="",document.getElementById("modalDiv").style.display="none"})),document.getElementById("narniaShiftDate").addEventListener("change",(()=>{e=document.getElementById("narniaShiftDate").value,null!==t&&(document.getElementById("modalSubmitButton").disabled=!1)})),document.querySelectorAll('input[name="narniaShift"]').forEach((n=>{n.addEventListener("change",this.#t=n=>{t=n.target.value,null!==e&&(document.getElementById("modalSubmitButton").disabled=!1)})})),document.getElementById("modalSubmitButton").addEventListener("click",(()=>{document.getElementById("formSubmit").disabled=!1,document.getElementById("fixButton").classList.remove("disabled"),document.getElementById("nspLogo").classList.remove("disabled"),document.getElementById("modalTitle").innerHTML="",document.getElementById("dataEntryDiv").innerHTML="",document.getElementById("modalDiv").style.display="none";let n=[];this.populateRoster(e,t).then((e=>{n=JSON.parse(e),console.log(`results = ${JSON.stringify(n)}`),this.displayResults(n)})),window.open("/src/views/results.ejs?x="+(new Date).getTime(),"_blank","location=yes,height=900,width=1000,scrollbars=yes,status=yes")}))}async populateRoster(e,t){let n=[e,t];return(await fetch(document.url,{method:"POST",body:JSON.stringify(n),headers:{"x-requested-with":"fetch.6",mode:"no-cors"}})).text()}async displayResults(e){console.log(`displayResults = ${JSON.stringify(e)}`),await fetch(document.url,{method:"POST",body:JSON.stringify(e),headers:{"x-requested-with":"fetch.2",mode:"no-cors"}})}}