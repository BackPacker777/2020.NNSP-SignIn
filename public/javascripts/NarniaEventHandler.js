"use strict";import NarniaContents from"./NarniaContents.js";export default class EventHandler{constructor(e){this.patrollers=e,this.handleNarniaButton(),this.handleReturnButton(),this.handlePatrollerWorkButton(),this.handleUploadFileButton()}handleNarniaButton(){let e=!1;document.getElementById("nspLogo").addEventListener("click",()=>{document.getElementById("narniaDate").innerText=document.getElementById("date").innerText,document.getElementById("narniaWeekDay").innerText=document.getElementById("weekDay").innerText,document.getElementById("narniaDayNight").innerText=document.getElementById("dayNight").innerText;let t=prompt("Password: ");for(let n of this.patrollers)n.ID===t&&n.LEADER&&(e=!0);e?(new NarniaContents,document.getElementById("narniaDiv").style.display="block",document.getElementById("masterDiv").style.display="none",document.getElementById("topMast").style.display="none"):alert("Incorrect Password")})}handleReturnButton(){document.getElementById("formReturn").addEventListener("click",()=>{document.getElementById("narniaDiv").style.display="none",document.getElementById("masterDiv").style.display="block",document.getElementById("topMast").style.display="block"})}handlePatrollerWorkButton(){let e=!1;document.getElementById("patrollerWork").addEventListener("click",t=>{if(!e){t.stopImmediatePropagation();let e=NarniaContents.populateWorkDiv(this.patrollers);this.handleNarniaSnowmobile(e),this.handleNarniaToboggan(e),this.handleNarniaScavenger(e),this.handleNarniaCpr(e),this.handleNarniaChair(e);let n='<input type="submit" class="button success expanded border" id="patrollerUpdateButton" value="Update Patroller Data">';document.getElementById("narniaCenterButton").insertAdjacentHTML("beforeend",n),document.getElementById("patrollerUpdateButton").addEventListener("click",t=>{t.stopImmediatePropagation(),this.updatePatrollerData(e),document.getElementById("narniaWork").innerHTML="",document.getElementById("narniaCenterButton").innerHTML="",alert("Patroller Data Updated.")})}e=!0})}handleNarniaSnowmobile(e){let t=0;for(;t<e;)document.getElementById(`narniaSnowmobile.${t}`).addEventListener("click",e=>{let t=e.target.id.substring(17,19);1!==Number(this.patrollers[t].SNOWMOBILE)?(this.patrollers[t].SNOWMOBILE=1,document.getElementById(`narniaSnowmobileValue.${t}`).value=1,document.getElementById(`narniaSnowmobile.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaSnowmobile.${t}`).style.cursor="default"):(this.patrollers[t].SNOWMOBILE=0,document.getElementById(`narniaSnowmobileValue.${t}`).value=0,document.getElementById(`narniaSnowmobile.${t}`).style.color="rgb(204,75,55)")}),1!==Number(this.patrollers[t].SNOWMOBILE)?document.getElementById(`narniaSnowmobile.${t}`).style.color="rgb(204,75,55)":(document.getElementById(`narniaSnowmobile.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaSnowmobile.${t}`).style.cursor="default"),t++}handleNarniaToboggan(e){let t=0;for(;t<e;)document.getElementById(`narniaToboggan.${t}`).addEventListener("click",e=>{let t=e.target.id.substring(15,17);1!==Number(this.patrollers[t].TOBOGGAN)?(this.patrollers[t].TOBOGGAN=1,document.getElementById(`narniaTobogganValue.${t}`).value=1,document.getElementById(`narniaToboggan.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaToboggan.${t}`).style.cursor="default"):(this.patrollers[t].TOBOGGAN=0,document.getElementById(`narniaTobogganValue.${t}`).value=0,document.getElementById(`narniaToboggan.${t}`).style.color="rgb(204,75,55)")}),1!==Number(this.patrollers[t].TOBOGGAN)?document.getElementById(`narniaToboggan.${t}`).style.color="rgb(204,75,55)":(document.getElementById(`narniaToboggan.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaToboggan.${t}`).style.cursor="default"),t++}handleNarniaScavenger(e){let t=0;for(;t<e;)document.getElementById(`narniaScavenger.${t}`).addEventListener("click",e=>{let t=e.target.id.substring(16,18);1!==Number(this.patrollers[t].SCAVENGER)?(this.patrollers[t].SCAVENGER=1,document.getElementById(`narniaScavengerValue.${t}`).value=1,document.getElementById(`narniaScavenger.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaScavenger.${t}`).style.cursor="default"):(this.patrollers[t].SCAVENGER=0,document.getElementById(`narniaScavengerValue.${t}`).value=0,document.getElementById(`narniaScavenger.${t}`).style.color="rgb(204,75,55)")}),1!==Number(this.patrollers[t].SCAVENGER)?document.getElementById(`narniaScavenger.${t}`).style.color="rgb(204,75,55)":(document.getElementById(`narniaScavenger.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaScavenger.${t}`).style.cursor="default"),t++}handleNarniaCpr(e){let t=0;for(;t<e;)document.getElementById(`narniaCpr.${t}`).addEventListener("click",e=>{let t=e.target.id.substring(10,12);1!==Number(this.patrollers[t].CPR)?(this.patrollers[t].CPR=1,document.getElementById(`narniaCprValue.${t}`).value=1,document.getElementById(`narniaCpr.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaCpr.${t}`).style.cursor="default"):(this.patrollers[t].CPR=0,document.getElementById(`narniaCprValue.${t}`).value=0,document.getElementById(`narniaCpr.${t}`).style.color="rgb(204,75,55)")}),1!==Number(this.patrollers[t].CPR)?document.getElementById(`narniaCpr.${t}`).style.color="rgb(204,75,55)":(document.getElementById(`narniaCpr.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaCpr.${t}`).style.cursor="default"),t++}handleNarniaChair(e){let t=0;for(;t<e;)document.getElementById(`narniaChair.${t}`).addEventListener("click",e=>{let t=e.target.id.substring(12,14);1!==Number(this.patrollers[t].CHAIR)?(this.patrollers[t].CHAIR=1,document.getElementById(`narniaChairValue.${t}`).value=1,document.getElementById(`narniaChair.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaChair.${t}`).style.cursor="default"):(this.patrollers[t].CHAIR=0,document.getElementById(`narniaChairValue.${t}`).value=0,document.getElementById(`narniaChair.${t}`).style.color="rgb(204,75,55)")}),1!==Number(this.patrollers[t].CHAIR)?document.getElementById(`narniaChair.${t}`).style.color="rgb(204,75,55)":(document.getElementById(`narniaChair.${t}`).style.color="rgb(23,121,186)",document.getElementById(`narniaChair.${t}`).style.cursor="default"),t++}handleUploadFileButton(){document.getElementById("uploadFile").addEventListener("click",()=>{})}updatePatrollerData(e){let t=[];for(let n=0;n<e;n++)t[n]={ID:document.getElementById(`narniaPatrollerID.${n}`).value,LAST_NAME:document.getElementById(`narniaLastName.${n}`).value,FIRST_NAME:document.getElementById(`narniaFirstName.${n}`).value,RATING:document.getElementById(`narniaRating.${n}`).value,LEADER:document.getElementById(`narniaLeader.${n}`).value,DAYS:document.getElementById(`narniaDays.${n}`).value,HALF_DAYS:document.getElementById(`narniaHalfDays.${n}`).value,NIGHTS:document.getElementById(`narniaNights.${n}`).value,SNOWMOBILE:document.getElementById(`narniaSnowmobileValue.${n}`).value,TOBOGGAN:document.getElementById(`narniaTobogganValue.${n}`).value,SCAVENGER:document.getElementById(`narniaScavengerValue.${n}`).value,CPR:document.getElementById(`narniaCprValue.${n}`).value,CHAIR:document.getElementById(`narniaChairValue.${n}`).value};fetch(document.url,{method:"POST",body:JSON.stringify(t),headers:{"x-requested-with":"fetch.1",mode:"no-cors"}}).then(e=>e.json()).catch(e=>{console.log(e)})}}