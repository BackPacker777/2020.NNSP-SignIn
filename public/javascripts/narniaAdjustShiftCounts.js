import DivContents from"./DivContents2.js";import WebStorage from"./WebStorage.js";export default class narniaAdjustShiftCounts{#e;#t;#l;#d;constructor(e,t,l,d){this.#e=e,this.#t=t,this.#l=l,this.#d=d,this.main()}main(){document.getElementById("modalDiv").style.display="block",document.getElementById("modalTitle").insertAdjacentHTML("beforeend","<h3>Updating Patroller Shifts</h3>"),document.getElementById("dataEntryDiv").insertAdjacentHTML("beforeend",DivContents.getDivs(8,1)),document.getElementById("modalSubmitButton").disabled=!0,document.getElementById("fixButton").classList.add("disabled"),document.getElementById("nspLogo").classList.add("disabled"),document.getElementById("modalPatrollerID.8.1").focus(),document.getElementById("modalCancelButton").addEventListener("click",(()=>{document.getElementById("fixButton").classList.remove("disabled"),document.getElementById("nspLogo").classList.remove("disabled"),document.getElementById("modalPatrollerID.8.1").value="",document.getElementById("modalName.8.1").value="",document.getElementById("modalDays.8.1").value="",document.getElementById("modalNights.8.1").value="",document.getElementById("modalHalfs.8.1").value="",document.getElementById("modalTitle").innerHTML="",document.getElementById("dataEntryDiv").innerHTML="",document.getElementById("modalDiv").style.display="none"})),document.getElementById("modalPatrollerID.8.1").addEventListener("change",(()=>{let t=!1;if(""!==document.getElementById("modalPatrollerID.8.1").value){for(let l=0;l<this.#e.length;l++)if(l<this.#e.length&&Number(document.getElementById("modalPatrollerID.8.1").value)===Number(this.#e[l].ID)){t=!0,document.getElementById("modalName.8.1").value=`${this.#e[l].FIRST_NAME} ${this.#e[l].LAST_NAME}`,document.getElementById("modalDays.8.1").value=this.#e[l].DAYS,document.getElementById("modalDays.8.1").addEventListener("change",(()=>{document.getElementById("modalDays.8.1").reportValidity()?(document.getElementById("modalShifts.8.1").value=e(),document.getElementById("modalSubmitButton").disabled=!1):(document.getElementById("modalSubmitButton").disabled=!0,document.getElementById("modalDays.8.1").value="")})),document.getElementById("modalNights.8.1").value=this.#e[l].NIGHTS,document.getElementById("modalNights.8.1").addEventListener("change",(()=>{document.getElementById("modalNights.8.1").reportValidity()?(document.getElementById("modalShifts.8.1").value=e(),document.getElementById("modalSubmitButton").disabled=!1):(document.getElementById("modalSubmitButton").disabled=!0,document.getElementById("modalNights.8.1").value="")})),document.getElementById("modalHalfs.8.1").value=this.#e[l].HALF_DAYS,document.getElementById("modalHalfs.8.1").addEventListener("change",(()=>{document.getElementById("modalHalfs.8.1").reportValidity()?(document.getElementById("modalShifts.8.1").value=e(),document.getElementById("modalSubmitButton").disabled=!1):(document.getElementById("modalSubmitButton").disabled=!0,document.getElementById("modalHalfs.8.1").value="")})),document.getElementById("modalShifts.8.1").value=e();break}t||(alert("Invalid patroller number."),document.getElementById("modalPatrollerID.8.1").value="")}})),document.getElementById("modalSubmitButton").addEventListener("click",(()=>{for(let e=0;e<this.#e.length;e++)if(Number(document.getElementById("modalPatrollerID.8.1").value)===Number(this.#e[e].ID)){this.#e[e].DAYS=document.getElementById("modalDays.8.1").value,this.#e[e].NIGHTS=document.getElementById("modalNights.8.1").value,this.#e[e].HALF_DAYS=document.getElementById("modalHalfs.8.1").value;break}for(let e=0;e<this.#t.length;e++)if(this.#t.length>0&&Number(document.getElementById("modalPatrollerID.8.1").value)===Number(this.#t[e].ID)){this.#t[e].DAYS=Number(document.getElementById("modalDays.8.1").value),this.#t[e].NIGHTS=Number(document.getElementById("modalNights.8.1").value),this.#t[e].HALF_DAYS=Number(document.getElementById("modalHalfs.8.1").value);let t=Number(this.#t[e].HALF_DAYS/2);this.#t[e].TOTAL_DAYS=Number(this.#t[e].DAYS)+Number(this.#t[e].NIGHTS)+t,WebStorage.populateLocalStorage(this.#t[e],this.#t[e].POSITION_TEAM),this.#d(this.#t);break}document.getElementById("formSubmit").disabled=!1,document.getElementById("fixButton").classList.remove("disabled"),document.getElementById("nspLogo").classList.remove("disabled");for(let e of this.#l)document.getElementById(e.id).disabled=!1;document.getElementById("modalPatrollerID.8.1").value="",document.getElementById("modalName.8.1").value="",document.getElementById("modalDays.8.1").value="",document.getElementById("modalNights.8.1").value="",document.getElementById("modalHalfs.8.1").value="",document.getElementById("modalTitle").innerHTML="",document.getElementById("dataEntryDiv").innerHTML="",document.getElementById("modalDiv").style.display="none"}));let e=function(){return Number(document.getElementById("modalDays.8.1").value)+Number(document.getElementById("modalNights.8.1").value)+Number(document.getElementById("modalHalfs.8.1").value/2)}}}