"use strict";import EventHandler from"./EventHandler.js";class Main{constructor(e){this.date=new Date,document.getElementById("date").innerText=this.getWeekDay(),document.getElementById("weekDay").innerText=`${this.date.getMonth()+1}/${this.date.getDate()}/${this.date.getFullYear()}`,this.eventHandler=new EventHandler(e,["Snowmobile","Toboggan","Scavenger","Cpr","Chair"]),Main.loadServiceWorker(),this.prepUX()}static loadServiceWorker(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceWorker.js").then((()=>{console.log("Service Worker Registered")}))}getWeekDay(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][this.date.getDay()]}prepUX(){if(document.getElementById("noPrint").style.display="none",document.getElementById("narniaDiv").style.display="none",document.getElementById("masterDiv").style.display="none",document.getElementById("modalDiv").style.display="none",document.getElementById("chosen").style.display="none",document.getElementById("formSubmit").disabled=!0,this.eventHandler.populatePage(),1===this.eventHandler.populated){let e=new Event("change");document.dispatchEvent(e)}}static async populatePatrollers(){return(await fetch("/data/patrollers.csv",{method:"post",headers:{"x-requested-with":"fetch.0"}})).text()}}window.addEventListener("load",(()=>{Main.populatePatrollers().then((e=>{e=JSON.parse(e),new Main(e)}))}));